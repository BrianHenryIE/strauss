{
    "name": "brianhenryie/strauss",
    "description": "Prefixes dependencies namespaces so they are unique to your plugin",
    "authors": [
        {
            "name": "Brian Henry",
            "email": "BrianHenryIE@gmail.com"
        },
        {
            "name": "Coen Jacobs",
            "email": "coenjacobs@gmail.com"
        }
    ],
    "bin": ["bin/strauss"],
    "minimum-stability": "dev",
    "prefer-stable": true,
    "license": "MIT",
    "repositories": {
        "composer/composer": {
            "type": "vcs",
            "url": "https://github.com/brianhenryie/composer"
        }
    },
    "require": {
        "ext-json": "*",
        "brianhenryie/simple-php-code-parser": "^0.15.3",
        "composer/class-map-generator": "^1.6.0",
        "composer/composer": "dev-main#598e88e43cb5f9d6d2bf444b911cee532fa6d428",
        "composer-runtime-api": "^2.0",
        "elazar/flystream": "^0.6.0|^1.4",
        "json-mapper/json-mapper": "^2.0.0",
        "league/flysystem": "^2.1|^3.0",
        "league/flysystem-memory": "*",
        "monolog/monolog": "^2.10",
        "nikic/php-parser": "^5.4.0",
        "symfony/console": "^4|^5|^6|^7",
        "symfony/finder": "^4|^5|^6|^7"
    },
    "autoload": {
        "psr-4": {
            "BrianHenryIE\\Strauss\\": "src/"
        },
        "files": [
            "bootstrap.php"
        ]
    },
    "autoload-dev": {
        "psr-4": {
            "BrianHenryIE\\Strauss\\Tests\\": "tests/",
            "BrianHenryIE\\Strauss\\": [
                "tests/",
                "tests/Integration",
                "tests/Unit"
            ]
        }
    },
    "require-dev": {
        "php": "^7.4|^8.0",
        "brianhenryie/color-logger": "*",
        "brianhenryie/php-codecoverage-markdown": "^0.1.0",
        "clue/phar-composer": "^1.2",
        "jaschilz/php-coverage-badger": "^2.0",
        "mockery/mockery": "^1.6",
        "phpstan/extension-installer": "^1.4",
        "phpstan/phpstan": "^1.10",
        "phpstan/phpstan-mockery": "^1.1",
        "phpunit/phpcov": "*",
        "phpunit/phpunit": "^9|^10",
        "squizlabs/php_codesniffer": "^3.5"
    },
    "extra": {
        "patches": {
            "composer/composer": {
                "Improve stream wrapper support": "https://github.com/composer/composer/pull/12396.patch"
            },
            "elazar/flystream": {
                "Catch exceptions; return false ": "https://github.com/elazar/flystream/pull/17.patch"
            }
        }
    },
    "conflict": {
      "json-mapper/json-mapper": "2.23.0 | 2.24.0"
    },
    "scripts": {
        "post-install-cmd": [
        ],
        "post-update-cmd": [
        ],
        "analyze": [
          "phpstan analyse --memory-limit=-1 --verbose"
        ],
        "analyze-changes": [
          "updated_files=$(echo $(git diff --name-only `git merge-base origin/master HEAD` | grep php | tr '\\n' '\\0' | xargs -0 ls -1df 2>/dev/null)); if [ -n \"$updated_files\" ]; then phpstan analyse --memory-limit=-1 $updated_files --verbose || true; else echo \"No modified php files for phpstan.\"; fi;"
        ],
        "analyze-changes-strict": [
          "updated_files=$(echo $(git diff --name-only `git merge-base origin/master HEAD` | grep php | tr '\\n' '\\0' | xargs -0 ls -1df 2>/dev/null)); if [ -n \"$updated_files\" ]; then echo \"Found: $updated_files\"; phpstan analyse --memory-limit=-1 $updated_files --level max --verbose || true; else echo \"No modified php files for phpstan.\"; fi;"
        ],
        "cs": [
          "phpcs || true",
          "@analyze"
        ],
        "cs-changes": [
          "updated_files=$(echo $(git diff --name-only `git merge-base origin/master HEAD` | grep php | tr '\\n' '\\0' | xargs -0 ls -1df 2>/dev/null)); if [ -n \"$updated_files\" ]; then phpcbf $updated_files || true; phpcs $updated_files || true; else echo \"No modified php files.\"; fi;",
          "@analyze-changes"
        ],
        "cs-changes-strict": [
          "updated_files=$(echo $(git diff --name-only `git merge-base origin/master HEAD` | grep php | tr '\\n' '\\0' | xargs -0 ls -1df 2>/dev/null)); if [ -n \"$updated_files\" ]; then phpcbf $updated_files || true; phpcs $updated_files || true; else echo \"No modified php files.\"; fi;",
          "@analyze-changes-strict"
        ],
        "cs-fix": [
            "phpcbf || true",
            "@cs"
        ],
        "install-phive-dependencies": [
            "if [ -z \"$(command -v phive)\" ]; then echo \"Phive is not installed. Run 'brew install gpg phive' or see https://phar.io/.\"; exit 1; fi;",
            "phive install"
        ],
        "test": [
            "Composer\\Config::disableProcessTimeout",
            "phpunit --stop-on-failure --order-by=random"
        ],
        "test-coverage": [
            "Composer\\Config::disableProcessTimeout",
            "if [ \"$XDEBUG_MODE\" != \"coverage\" ]; then echo \"Run with 'XDEBUG_MODE=coverage composer test-coverage'\"; exit 1; fi;",
            "phpunit ./tests/Unit --coverage-text --coverage-clover tests/_reports/partial/unitclover.xml --coverage-php tests/_reports/partial/unitphp.cov -d memory_limit=-1 --order-by=random",
            "phpcov merge --clover tests/_reports/clover.xml --html tests/_reports/html tests/_reports/partial;",
            "php-coverage-badger tests/_reports/clover.xml .github/coverage.svg",
            "if [ $(command -v ./tools/phpcov) ]; then git diff master...head > /tmp/master.diff; ./tools/phpcov patch-coverage --path-prefix $(pwd) ./tests/_reports/php.cov /tmp/master.diff || true; fi;",
            "# Run 'open ./tests/_reports/html/index.html' to view report."
        ]
    },
    "scripts-descriptions": {
        "test-changes": "Run PHPUnit only on lines that have changed in master...HEAD",
        "test-changes-report": "Run PHPUnit only on files that have changed in master...HEAD and display the HTML report.",
        "test-coverage": "Run PHPUnit tests with coverage. Use 'XDEBUG_MODE=coverage composer test-coverage' to run, 'open ./tests/_reports/html/index.html' to view."
    },
    "replace":{
        "coenjacobs/mozart": "*"
    },
    "config": {
        "sort-packages": true,
        "allow-plugins": {
            "phpstan/extension-installer": true
        }
    }
}
